<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }

        .section-container {
            padding: 20px;
        }

        .section-title {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .cards-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .section-card {
            width: calc(33.33% - 20px);
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 20px;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }

        .section-card h2 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .section-card p {
            font-size: 14px;
        }

        .team-members-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .team-member-card {
            width: calc(33.33% - 20px);
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 20px;
        }

        .team-member-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }

        .team-member-card img {
            max-width: 100%;
            height: auto;
            border-radius: 50%;
        }

        .team-member-card h3 {
            font-size: 18px;
            margin-top: 10px;
        }

        .team-member-card p {
            font-size: 14px;
        }

        .stats-container {
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .data-container {
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .tools-container {
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .repo-link {
            margin-top: 20px;
            font-size: 16px;
        }

        .postman-link {
            margin-top: 20px;
            font-size: 16px;
        }
    </style>
    <title>City Model</title>
  </head>
  <body>
    {% include 'navbar.html' %}
    <h1 class="text-center">StormShelters</h1>

    <div class="'center-text">
        <p>StormShelters is an application that can provide those in Harris County that have been affected by natural disasters with resources for help and shelter.</p>
    </div>
    <div class="container">
        <img src="/static/img/aaron.jpg" alt="Image 1">
        <div class="text"><span style="font-weight: bold;">Aaron Kulkarni</span></div>
        <div class="text">I am a CS major currently in my third year from New Jersey. My favorite activities outside of the classroom are basketball, judo, and guitar.</div>
        <div class="text" id="issues_aaronk2711">Number of issues: </div>
        <div class="text" id="commits_aaronk2711"> Number of commits: </div>
        <div class="text" id="unitTests_aaronk2711">Number of unit tests: </div>
    </div>
    <div class="container">
        <img src="/static/img/shreya.PNG" alt="Image 1">
        <div class="text"><span style="font-weight: bold;">Shreya Nakka</span></div>
        <div class="text">I'm a Computer Science major in my Junior year. In my free time, I enjoy playing tennis, volleyball, and painting.</div>
        <div class="text" id="issues_shreya.n">Number of issues: </div>
        <div class="text" id="commits_shreya.n">Number of commits: </div>
        <div class="text" id="unitTests_shreya.n">Number of unit tests: </div>
    </div>
    <div class="container">
        <img src="/static/img/rohit.jpeg" alt="Image 1">
        <div class="text"><span style="font-weight: bold;">Rohit Chawla</span></div>
        <div class="text">I'm a Computer Science major in my Junior year. I have lived in Austin my entire life and I enjoy playing board games.</div>
        <div class="text" id="issues_rohitc28">Number of issues: </div>
        <div class="text" id="commits_rohitc28">Number of commits: </div>
        <div class="text" id="unitTests_rohitc28">Number of unit tests: </div>
    </div>
    <div class="container">
        <img src="/static/img/john.jpg" alt="Image 1">
        <div class="text"><span style="font-weight: bold;">John Smith</span></div>
        <div class="text">I am a junior computer science major from the Rio Grande Valley. In my free time, I enjoy camping and spending time with family.</div>
        <div class="text" id="issues_johnrsmith2003">Number of issues: </div>
        <div class="text" id="commits_johnrsmith2003">Number of commits: </div>
        <div class="text" id="unitTests_johnrsmith2003">Number of unit tests: </div>
    </div>
    <div class="container">
        <img src="/static/img/adriana.png" alt="Image 1">
        <div class="text"><span style="font-weight: bold;">Adriana Reyes</span></div>
        <div class="text">I'm a senior computer science major from Austin. Outside of CS I like to play guitar, skateboard, and draw.</div>
        <div class="text" id="issues_areye2020">Number of issues: </div>
        <div class="text" id="commits_areye2020">Number of commits: </div>
        <div class="text" id="unitTests_areye2020">Number of unit tests: </div>
    </div>    
    </div>

    <script>
        const projectId = '50438097';

        contributor_data = ["aaronk2711", "shreya.n", "rohitc28", "johnrsmith2003", "areye2020"]
        commit_names = ["Aaron Kulkarni", "Shreya Nakka", "Rohit Chawla", "jrsmith0", "Adriana Reyes"]

        async function fetchAndUpdateContributorData() {
            for (var i = 0; i < contributor_data.length; i++) {
                const contributorName = contributor_data[i];

                console.log(contributorName)

                // scrape issues
                const issuesResponse = await fetch(`https://gitlab.com/api/v4/projects/${projectId}/issues?author_username=${contributorName}`);
                if (!issuesResponse.ok) {
                    throw new Error(`HTTP error! Status: ${issuesResponse.status}`);
                }
                const issuesData = await issuesResponse.json();

                const issuesTextElement = document.getElementById(`issues_${contributorName}`);
                issuesTextElement.textContent = `Number of issues: ${issuesData.length}`;


                // scrape commits
                const commitsResponse = await fetch(`https://gitlab.com/api/v4/projects/${projectId}/repository/commits?author_username=${contributorName}&per_page=100`);
                if (!commitsResponse.ok) {
                    throw new Error(`HTTP error! Status: ${commitsResponse.status}`);
                }
                const commitsData = await commitsResponse.json();

                let count = 0
                for (const commit of commitsData) {
                    if (commit.author_name === commit_names[i]) {
                        count++
                    }
                }

                console.log(commitsData);

                const commitsTextElement = document.getElementById(`commits_${contributorName}`);
                commitsTextElement.textContent = `Number of commits: ${count}`;


                // scrape unit tests
                // const unitTestsResponse = await fetch(`https://gitlab.com/api/v4/projects/${projectId}/pipelines?username=${contributorName}&scope=success`);
                // if (!unitTestsResponse.ok) {
                //     throw new Error(`HTTP error! Status: ${unitTestsResponse.status}`);
                // }
                // const unitTestsData = await unitTestsResponse.json();

                const unitTestsTextElement = document.getElementById(`unitTests_${contributorName}`);
                unitTestsTextElement.textContent = `Number of unit tests: 0`;
            }
        }

        fetchAndUpdateContributorData();
    </script>

            <div class="team-member-card">
                <img src="https://via.placeholder.com/150" alt="Team Member 5">
                <h3>Team Member 5</h3>
                <p>Bio: Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                <p>Major Responsibilities: Lorem ipsum dolor sit amet.</p>
                <p>No. of Commits: 80</p>
                <p>No. of Issues: 6</p>
            </div>
        </div>

        <h1 class="section-title">Stats</h1>
        <div class="stats-container">
            <p>Total Number of Commits: 365</p>
            <p>Total Number of Issues: 20</p>
        </div>

        <h1 class="section-title">Data</h1>
        <div class="data-container">
            <p>Name: Data Source 1</p>
            <p>Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <p>Link to Data Source: <a href="#">Data Source 1 Link</a></p>
        </div>

        <h1 class="section-title">Tools</h1>
        <div class="tools-container">
            <p>Tool Title: Tool 1</p>
            <p>Description of Use: Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        </div>

        <div class="repo-link">
            <h1 class="section-title">GitHub Repository</h1>
            <p>Find our code on <a href="https://github.com/your-repo-link">GitHub</a></p>
        </div>

        <div class="postman-link">
            <h1 class="section-title">Postman API</h1>
            <p>Explore our API documentation on <a href="https://www.postman.com/your-api-link">Postman</a></p>
        </div>
    </div>
</body>
</html>
